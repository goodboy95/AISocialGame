# 谁是卧底游戏页 (Undercover Game Room)

**文件路径:** `src/pages/games/UndercoverRoom.tsx`

## 1. 页面概述
这是《谁是卧底》玩法的核心实现页面，包含了从等待、发牌、描述到投票结算的完整游戏生命周期。

## 2. 关键元素

### 2.1 顶部状态栏
*   显示房间号、轮次。
*   **中央状态指示器**: 显示倒计时和当前阶段（描述/投票/查词）。
*   **开发工具**: 右上角 Bug 图标，用于快速切换游戏阶段（调试用）。

### 2.2 游戏区域 (响应式布局)
*   **桌面端**: **拟物圆桌布局**。使用三角函数计算玩家头像在圆周上的绝对定位坐标。
*   **移动端**: **网格布局**。玩家头像按 Grid 排列。

### 2.3 底部操作区 (移动端 Tab)
*   **聊天 Tab**: 包含聊天记录流和输入框（支持文本/语音切换）。
*   **底牌 Tab**: 包含一个巨大的“按住查看”区域，实现防窥功能。

### 2.4 侧边栏 (桌面端)
*   左侧：玩家列表与 AI 添加面板。
*   右侧：游戏日志流与操作面板（查看底牌、输入框）。

### 2.5 结算弹窗 (Settlement Overlay)
*   游戏结束时覆盖全屏，展示胜负结果和复盘信息。

## 3. 开发要点
*   **游戏阶段管理**: 使用 `phase` 状态 (`lobby`, `distribution`, `description`, `voting`, `elimination`, `settlement`) 控制 UI 显隐。
*   **交互逻辑**:
    *   **防窥查看**: 结合 `onMouseDown`/`onTouchStart` 和 `onMouseUp`/`onTouchEnd` 实现按住显示逻辑。
    *   **投票**: 点击头像选中 -> 记录 ID -> 点击确认按钮提交。
*   **AI 集成**: 在 Lobby 阶段提供 AI 选择下拉框和添加按钮。