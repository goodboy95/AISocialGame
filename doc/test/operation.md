# 系统功能与操作步骤（2026-02-17）

## 0. 入口与端口
1. 前端入口：`http://127.0.0.1:10030`（或 `http://aisocialgame.seekerhut.com`）。
2. 后端入口：`http://127.0.0.1:20030/api`。
3. 房间实时通道：`ws://<host>/ws`（由前端 Nginx 反代到后端）。

## 1. 大厅到房间主路径
1. 打开首页，确认导航与“热门游戏”区域可渲染。
2. 进入玩法房间页（卧底或狼人杀），页面应展示：
   - 阶段信息
   - 倒计时区域（有阶段结束时间时显示）
   - 玩家卡片区与日志区
   - 房间聊天面板（表情、快捷短语、文本输入框）
3. 等待连接断开时，顶部应显示连接状态提示条。

## 2. 房间聊天路径（本次改动重点）
1. 进入 `.../room/undercover/{roomId}` 或 `.../room/werewolf/{roomId}`。
2. 在聊天输入框输入与功能匹配的文本并回车提交（示例：`我觉得先观察一轮，再决定投票对象。`）。
3. 在狼人房间输入战术文本并提交（示例：`白天我会重点关注发言前后矛盾的玩家。`）。
4. 期望：
   - 连接可用时，消息广播到聊天区。
   - 连接不可用时，前端给出“聊天发送失败，连接未就绪”提示。

## 3. 对局动作路径（依赖后端可用）
1. 开局：点击“开始游戏”。
2. 发言阶段：填写发言输入框并提交。
3. 投票阶段：选择目标并投票。
4. 狼人夜晚阶段：按角色提交夜晚行动。
5. 期望：动作成功后页面通过 WS 状态事件或主动校准刷新到下一阶段。

## 4. 回归关注点
1. `players[].connectionStatus` 在房间 UI 中可见（离线/托管标记）。
2. 房间列表与房间页不再依赖 2 秒轮询，主要依赖 WS 事件刷新。
3. `/ws` 代理链路必须可达，否则显示自动重连提示。
